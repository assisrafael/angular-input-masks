!function(e){"use strict";e.module("ui.utils.masks.helpers",[]).factory("PreFormatters",[function(){function e(e){var r=e.replace(/^-/,"").replace(/^0*/,"");return r=r.replace(/[^0-9]/g,"")}function r(r,n){return e(parseFloat(r).toFixed(n))}return{clearDelimitersAndLeadingZeros:e,prepareNumberToFormatter:r}}]).factory("NumberValidators",[function(){return{maxNumber:function(e,r,n){var i=parseFloat(n),t=e.$isEmpty(r)||isNaN(i)||i>=r;return e.$setValidity("max",t),r},minNumber:function(e,r,n){var i=parseFloat(n),t=e.$isEmpty(r)||isNaN(i)||r>=i;return e.$setValidity("min",t),r}}}]).factory("NumberMasks",[function(){return{viewMask:function(e,r,n){var i="#"+n+"##0";if(e>0){i+=r;for(var t=0;e>t;t++)i+="0"}return new StringMask(i,{reverse:!0})},modelMask:function(e){var r="###0";if(e>0){r+=".";for(var n=0;e>n;n++)r+="0"}return new StringMask(r,{reverse:!0})}}}]),e.module("ui.utils.masks",["ui.utils.masks.global","ui.utils.masks.br"]).config(["$logProvider",function(e){e.debugEnabled(!1)}]),e.module("ui.utils.masks.br",["ui.utils.masks.helpers","ui.utils.masks.br.cep","ui.utils.masks.br.cpfCnpj","ui.utils.masks.br.ie","ui.utils.masks.br.nfe","ui.utils.masks.br.phone"]),e.module("ui.utils.masks.global",["ui.utils.masks.helpers","ui.utils.masks.global.date","ui.utils.masks.global.money","ui.utils.masks.global.number","ui.utils.masks.global.percentage","ui.utils.masks.global.scientific-notation","ui.utils.masks.global.time"]),e.module("ui.utils.masks.br.cep",[]).directive("uiBrCepMask",[function(){function e(e){return e?e.replace(/[^0-9]/g,""):e}function r(e,r){if(!e)return r.$setValidity("cep",!0),e;var i=n.process(e);r.$setValidity("cep",i.valid);var t=i.result;return t.trim().replace(/[^0-9]$/,"")}var n=new StringMask("00000-000");return{restrict:"A",require:"?ngModel",link:function(n,i,t,a){a&&(a.$formatters.push(function(e){return r(e,a)}),a.$parsers.push(function(n){if(!n)return r(n,a);var i=e(n),t=r(i,a);return a.$viewValue!==t&&(a.$setViewValue(t),a.$render()),e(t)}))}}}]),function(){function r(e,r){var n=e.$isEmpty(r)||BrV.cpf.validate(r);return e.$setValidity("cpf",n),r}function n(e,r){var n=e.$isEmpty(r)||BrV.cnpj.validate(r);return e.$setValidity("cnpj",n),r}function i(e,i){return!i||i.length<=11?(n(e,""),r(e,i)):(r(e,""),n(e,i))}function t(){function e(e){if(!e)return e;var r=l.apply(e);return r.trim().replace(/[^0-9]$/,"")}return{restrict:"A",require:"?ngModel",link:function(n,i,t,a){a&&(a.$formatters.push(function(n){return e(r(a,n))}),a.$parsers.push(function(r){if(!r)return r;var n=r.replace(/[^\d]/g,""),i=e(n);return a.$viewValue!==i&&(a.$setViewValue(i),a.$render()),i.replace(/[^\d]+/g,"")}),a.$parsers.push(function(e){return r(a,e)}))}}}function a(){function e(e){if(!e)return e;var r=u.apply(e);return r.trim().replace(/[^0-9]$/,"")}return{restrict:"A",require:"?ngModel",link:function(r,i,t,a){a&&(a.$formatters.push(function(r){return e(n(a,r))}),a.$parsers.push(function(r){if(!r)return r;var n=r.replace(/[^\d]+/g,""),i=e(n);return a.$viewValue!==i&&(a.$setViewValue(i),a.$render()),i.replace(/[^\d]+/g,"")}),a.$parsers.push(function(e){return n(a,e)}))}}}function s(){function e(e){if(!e)return e;var r;return r=e.length>11?u.apply(e):l.apply(e),r.trim().replace(/[^0-9]$/,"")}return{restrict:"A",require:"?ngModel",link:function(r,n,t,a){a&&(a.$formatters.push(function(r){return e(i(a,r))}),a.$parsers.push(function(r){if(!r)return r;var n=r.replace(/[^\d]+/g,""),i=e(n);return a.$viewValue!==i&&(a.$setViewValue(i),a.$render()),i.replace(/[^\d]+/g,"")}),a.$parsers.push(function(e){return i(a,e)}))}}}var u=new StringMask("00.000.000/0000-00"),l=new StringMask("000.000.000-00");e.module("ui.utils.masks.br.cpfCnpj",[]).directive("uiBrCpfMask",[t]).directive("uiBrCnpjMask",[a]).directive("uiBrCpfcnpjMask",[s]).directive("uiCpfMask",[t]).directive("uiCnpjMask",[a]).directive("uiCpfcnpjMask",[s])}(),e.module("ui.utils.masks.br.ie",[]).directive("uiBrIeMask",["$parse",function(e){function r(e){return e?e.replace(/[^0-9]/g,""):e}function n(e,n){if(!e||!t[e])return void 0;var i=e.toUpperCase();if("SP"===i&&/^P/i.test(n))return t.SP[1].mask;for(var a=t[e],s=0;a[s].chars&&a[s].chars<r(n).length&&s<a.length-1;)s++;return a[s].mask}function i(e,i,t){var a=n(i,e);if(!e||!a)return t.$setValidity("ie",!0),e;var s=a.process(r(e));t.$setValidity("ie",BrV.ie(i).validate(e));var u=s.result;return i&&"SP"===i.toUpperCase()&&/^p/i.test(e)?"P"+(u?u.trim().replace(/[^0-9]$/,""):""):u?u.trim().replace(/[^0-9]$/,""):u}var t={AC:[{mask:new StringMask("00.000.000/000-00")}],AL:[{mask:new StringMask("000000000")}],AM:[{mask:new StringMask("00.000.000-0")}],AP:[{mask:new StringMask("000000000")}],BA:[{chars:8,mask:new StringMask("000000-00")},{mask:new StringMask("0000000-00")}],CE:[{mask:new StringMask("00000000-0")}],DF:[{mask:new StringMask("00000000000-00")}],ES:[{mask:new StringMask("00000000-0")}],GO:[{mask:new StringMask("00.000.000-0")}],MA:[{mask:new StringMask("000000000")}],MG:[{mask:new StringMask("000.000.000/0000")}],MS:[{mask:new StringMask("000000000")}],MT:[{mask:new StringMask("0000000000-0")}],PA:[{mask:new StringMask("00-000000-0")}],PB:[{mask:new StringMask("00000000-0")}],PE:[{chars:9,mask:new StringMask("0000000-00")},{mask:new StringMask("00.0.000.0000000-0")}],PI:[{mask:new StringMask("000000000")}],PR:[{mask:new StringMask("000.00000-00")}],RJ:[{mask:new StringMask("00.000.00-0")}],RN:[{chars:9,mask:new StringMask("00.000.000-0")},{mask:new StringMask("00.0.000.000-0")}],RO:[{mask:new StringMask("0000000000000-0")}],RR:[{mask:new StringMask("00000000-0")}],RS:[{mask:new StringMask("000/0000000")}],SC:[{mask:new StringMask("000.000.000")}],SE:[{mask:new StringMask("00000000-0")}],SP:[{mask:new StringMask("000.000.000.000")},{mask:new StringMask("-00000000.0/000")}],TO:[{mask:new StringMask("00000000000")}]};return{restrict:"A",require:"?ngModel",link:function(n,t,a,s){var u=e(a.uiBrIeMask)(n);s&&(n.$watch(a.uiBrIeMask,function(e){u=e,i(s.$viewValue,u,s)}),s.$formatters.push(function(e){return i(e,u,s)}),s.$parsers.push(function(e){if(!e)return i(e,u,s);var n=i(e,u,s);return s.$viewValue!==n&&(s.$setViewValue(n),s.$render()),u&&"SP"===u.toUpperCase()&&/^p/i.test(e)?"P"+r(n):r(n)}))}}}]),e.module("ui.utils.masks.br.nfe",[]).directive("uiNfeAccessKeyMask",["$log",function(r){function n(r){return e.isUndefined(r)||0===r.length?r:r.replace(/[^0-9]/g,"").slice(0,44)}var i=new StringMask("0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000");return{restrict:"A",require:"ngModel",link:function(t,a,s,u){function l(n){if(r.debug("[uiNfeAccessKeyMask] Formatter called: ",n),e.isUndefined(n)||0===n.length)return n;var t=i.apply(n);return t.replace(/[^0-9]$/,"")}function o(e){r.debug("[uiNfeAccessKeyMask] Parser called: ",e);var i=n(e),t=l(i);return u.$viewValue!==t&&(u.$setViewValue(t),u.$render()),i}function c(n){if(r.debug("[uiNfeAccessKeyMask] Validator called: ",n),e.isUndefined(n))return n;var i=44===n.toString().length;return u.$setValidity("nfe-access-key",u.$isEmpty(n)||i),n}u.$formatters.push(l),u.$formatters.push(c),u.$parsers.push(o),u.$parsers.push(c)}}}]),e.module("ui.utils.masks.br.phone",[]).factory("PhoneValidators",[function(){return{brPhoneNumber:function(e,r){var n=e.$isEmpty(r)||10===r.length||11===r.length;return e.$setValidity("br-phone-number",n),r}}}]).directive("uiBrPhoneNumber",["PhoneValidators",function(e){function r(e){return e?e.replace(/[^0-9]/g,""):e}function n(e){if(!e)return e;var r;return r=e.length<11?i.apply(e):t.apply(e),r.trim().replace(/[^0-9]$/,"")}var i=new StringMask("(00) 0000-0000"),t=new StringMask("(00) 00000-0000");return{restrict:"A",require:"?ngModel",link:function(i,t,a,s){s&&(s.$formatters.push(function(r){return n(e.brPhoneNumber(s,r))}),s.$parsers.push(function(e){if(!e)return e;var i=r(e),t=n(i);return s.$viewValue!==t&&(s.$setViewValue(t),s.$render()),r(t)}),s.$parsers.push(function(r){return e.brPhoneNumber(s,r)}))}}}]);var r;"undefined"!=typeof moment&&(r=moment);var n=[];try{e.module("angular-momentjs"),n.push("angular-momentjs")}catch(i){}e.module("ui.utils.masks.global.date",n).directive("uiDateMask",["$locale","$log","$injector",function(n,i,t){var a;if("undefined"==typeof r){if(!t.has("MomentJS"))throw new Error("Moment.js not found. Check if it is available.");a=t.get("MomentJS")}else a=r;var s={"pt-br":"DD/MM/YYYY"},u=s[n.id]||"YYYY-MM-DD";return{restrict:"A",require:"?ngModel",link:function(r,n,t,s){function l(r){return e.isUndefined(r)?r:r.replace(/[^0-9]/g,"")}function o(r){if(!e.isUndefined(r)&&0!==r.length){var n=l(r),i=p.process(n).result;return i.trim().replace(/[^0-9]$/,"")}}function c(r){if(i.debug("[uiDateMask] Formatter called: ",r),!e.isUndefined(r)){var n=o(a(r).format(u));return m(n),n}}function f(e){i.debug("[uiDateMask] Parser called: ",e);var r=o(e);i.debug("[uiDateMask] Formated value: ",r),s.$viewValue!==r&&(s.$setViewValue(r),s.$render()),m(r);var n=a(r,u);return n.toDate()}function m(e){i.debug("[uiDateMask] Validator called: ",e);var r=a(e,u).isValid()&&e.length===u.length;s.$setValidity("date",s.$isEmpty(e)||r)}var p=new StringMask(u.replace(/[YMD]/g,"0"));s.$formatters.push(c),s.$parsers.push(f)}}}]),e.module("ui.utils.masks.global.money",[]).directive("uiMoneyMask",["$locale","$parse","PreFormatters","NumberValidators",function(r,n,i,t){return{restrict:"A",require:"?ngModel",link:function(a,s,u,l){function o(e){if(!e)return e;var r=e.replace(/[^\d]+/g,"");r=r.replace(/^[0]+([1-9])/,"$1");var n=g.apply(r);return e!==n&&(l.$setViewValue(n),l.$render()),n?parseInt(n.replace(/[^\d]+/g,""))/Math.pow(10,p):null}var c=r.NUMBER_FORMATS.DECIMAL_SEP,f=r.NUMBER_FORMATS.GROUP_SEP,m=u.currencySymbol||r.NUMBER_FORMATS.CURRENCY_SYM,p=parseInt(u.uiMoneyMask);if(l){e.isDefined(u.uiHideGroupSep)&&(f=""),isNaN(p)&&(p=2);var d=p>0?c+new Array(p+1).join("0"):"",k=m+" #"+f+"##0"+d,g=new StringMask(k,{reverse:!0});l.$formatters.push(function(r){if(e.isUndefined(r))return r;var n=i.prepareNumberToFormatter(r,p);return g.apply(n)}),l.$parsers.push(o),u.uiMoneyMask&&a.$watch(u.uiMoneyMask,function(e){isNaN(e)&&(e=2),d=e>0?c+new Array(e+1).join("0"):"",k=m+" #"+f+"##0"+d,g=new StringMask(k,{reverse:!0}),o(l.$viewValue||"")}),u.currencySymbol&&a.$watch(u.currencySymbol,function(e){e&&(m=e,d=p>0?c+new Array(p+1).join("0"):"",k=m+" #"+f+"##0"+d,g=new StringMask(k,{reverse:!0}),o(l.$viewValue||""))}),u.min&&(l.$parsers.push(function(e){var r=n(u.min)(a);return t.minNumber(l,e,r)}),a.$watch(u.min,function(e){t.minNumber(l,l.$modelValue,e)})),u.max&&(l.$parsers.push(function(e){var r=n(u.max)(a);return t.maxNumber(l,e,r)}),a.$watch(u.max,function(e){t.maxNumber(l,l.$modelValue,e)}))}}}}]),e.module("ui.utils.masks.global.number",[]).directive("uiNumberMask",["$locale","$parse","PreFormatters","NumberMasks","NumberValidators",function(r,n,i,t,a){return{restrict:"A",require:"?ngModel",link:function(s,u,l,o){function c(r){if(!r)return r;var n=i.clearDelimitersAndLeadingZeros(r)||"0",t=d.apply(n),a=parseFloat(k.apply(n));if(e.isDefined(l.uiNegativeNumber)){var s="-"===r[0],u="-"===r.slice(-1);u^s&&a&&(a*=-1,t="-"+t)}return o.$viewValue!==t&&(o.$setViewValue(t),o.$render()),a}var f=r.NUMBER_FORMATS.DECIMAL_SEP,m=r.NUMBER_FORMATS.GROUP_SEP,p=n(l.uiNumberMask)(s);if(o){e.isDefined(l.uiHideGroupSep)&&(m=""),isNaN(p)&&(p=2);var d=t.viewMask(p,f,m),k=t.modelMask(p);o.$formatters.push(function(r){var n="";if(e.isDefined(l.uiNegativeNumber)&&0>r&&(n="-"),!r)return r;var t=i.prepareNumberToFormatter(r,p);return n+d.apply(t)}),o.$parsers.push(c),l.uiNumberMask&&s.$watch(l.uiNumberMask,function(e){isNaN(e)&&(e=2),d=t.viewMask(e,f,m),k=t.modelMask(e),c(o.$viewValue||"")}),l.min&&(o.$parsers.push(function(e){var r=n(l.min)(s);return a.minNumber(o,e,r)}),s.$watch(l.min,function(e){a.minNumber(o,o.$modelValue,e)})),l.max&&(o.$parsers.push(function(e){var r=n(l.max)(s);return a.maxNumber(o,e,r)}),s.$watch(l.max,function(e){a.maxNumber(o,o.$modelValue,e)}))}}}}]),e.module("ui.utils.masks.global.percentage",[]).directive("uiPercentageMask",["$locale","$parse","PreFormatters","NumberMasks","NumberValidators",function(r,n,i,t,a){function s(e,r){return i.clearDelimitersAndLeadingZeros((100*parseFloat(e)).toFixed(r))}return{restrict:"A",require:"?ngModel",link:function(u,l,o,c){function f(e){if(!e)return e;var r=i.clearDelimitersAndLeadingZeros(e)||"0";e.length>1&&-1===e.indexOf("%")&&(r=r.slice(0,r.length-1));var n=g.apply(r)+" %",t=parseFloat(M.apply(r));return c.$viewValue!==n&&(c.$setViewValue(n),c.$render()),t}var m=r.NUMBER_FORMATS.DECIMAL_SEP,p=r.NUMBER_FORMATS.GROUP_SEP,d=parseInt(o.uiPercentageMask);if(c){e.isDefined(o.uiHideGroupSep)&&(p=""),isNaN(d)&&(d=2);var k=d+2,g=t.viewMask(d,m,p),M=t.modelMask(k);c.$formatters.push(function(e){if(!e)return e;var r=s(e,d);return g.apply(r)+" %"}),c.$parsers.push(f),o.uiPercentageMask&&u.$watch(o.uiPercentageMask,function(e){isNaN(e)&&(e=2),k=e+2,g=t.viewMask(e,m,p),M=t.modelMask(k),f(c.$viewValue||"")}),o.min&&(c.$parsers.push(function(e){var r=n(o.min)(u);return a.minNumber(c,e,r)}),u.$watch("min",function(e){a.minNumber(c,c.$modelValue,e)})),o.max&&(c.$parsers.push(function(e){var r=n(o.max)(u);return a.maxNumber(c,e,r)}),u.$watch("max",function(e){a.maxNumber(c,c.$modelValue,e)}))}}}}]),e.module("ui.utils.masks.global.scientific-notation",[]).directive("uiScientificNotationMask",["$locale","$parse","$log",function(r,n,i){function t(e){var r="0";if(e>0){r+=a;for(var n=0;e>n;n++)r+="0"}return new StringMask(r,{reverse:!0})}var a=r.NUMBER_FORMATS.DECIMAL_SEP,s=2;return{restrict:"A",require:"ngModel",link:function(r,u,l,o){function c(e){var r=e.toString(),n=r.match(/(-?[0-9]*)[\.]?([0-9]*)?[Ee]?([\+-]?[0-9]*)?/);return{integerPartOfSignificand:n[1],decimalPartOfSignificand:n[2],exponent:0|n[3]}}function f(r){if(i.debug("[uiScientificNotationMask] Formatter called: ",r),e.isUndefined(r))return r;if("string"==typeof r){if(0===r.length)return r;r=r.replace(a,".")}else"number"==typeof r&&(r=r.toExponential(d));var n,t,s=c(r),u=0|s.integerPartOfSignificand,l=u.toString();e.isDefined(s.decimalPartOfSignificand)&&(l+=s.decimalPartOfSignificand);var o=(u>=1||-1>=u)&&(e.isDefined(s.decimalPartOfSignificand)&&s.decimalPartOfSignificand.length>d||0===d&&l.length>=2);return o&&(t=l.slice(d+1,l.length),l=l.slice(0,d+1)),n=k.apply(l),0!==s.exponent&&(t=s.exponent),e.isDefined(t)&&(n+="e"+t),n}function m(r){if(i.debug("[uiScientificNotationMask] Parser called: ",r),e.isUndefined(r)||0===r.toString().length)return r;var n=f(r),t=parseFloat(n.replace(a,"."));return o.$viewValue!==n&&(o.$setViewValue(n),o.$render()),t}function p(r){if(i.debug("[uiScientificNotationMask] Validator called: ",r),e.isUndefined(r))return r;var n=r<Number.MAX_VALUE;return o.$setValidity("max",o.$isEmpty(r)||n),r}var d=n(l.uiScientificNotationMask)(r);isNaN(d)&&(d=s);var k=t(d);o.$formatters.push(f),o.$formatters.push(p),o.$parsers.push(m),o.$parsers.push(p)}}}]),e.module("ui.utils.masks.global.time",[]).directive("uiTimeMask",["$log",function(r){if("undefined"==typeof StringMask)throw new Error("StringMask not found. Check if it is available.");return{restrict:"A",require:"?ngModel",link:function(n,i,t,a){function s(r){return e.isUndefined(r)||0===r.length?r:r.replace(/[^0-9]/g,"").slice(0,c)}function u(n){if(r.debug("[uiTimeMask] Formatter called: ",n),e.isUndefined(n)||0===n.length)return n;var i=p.process(s(n)).result;return i.replace(/[^0-9]$/,"")}function l(e){r.debug("[uiTimeMask] Parser called: ",e);var n=u(e),i=n;return a.$viewValue!==i&&(a.$setViewValue(i),a.$render()),n}function o(n){if(r.debug("[uiTimeMask] Validator called: ",n),e.isUndefined(n))return n;var i=n.toString().split(/:/).filter(function(e){return!!e}),t=parseInt(i[0]),s=parseInt(i[1]),u=parseInt(i[2]||0),l=n.toString().length===f&&24>t&&60>s&&60>u;return a.$setValidity("time",a.$isEmpty(n)||l),n}var c=6,f=8,m="00:00:00";e.isDefined(t.uiTimeMask)&&"short"===t.uiTimeMask&&(c=4,f=5,m="00:00");var p=new StringMask(m);a.$formatters.push(u),a.$formatters.push(o),a.$parsers.push(l),a.$parsers.push(o)}}}])}(angular);